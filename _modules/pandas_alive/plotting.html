

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>pandas_alive.plotting &mdash; Pandas_Alive 0.2.2 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> Pandas_Alive
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../README.html">Installation &amp; Examples</a></li>
</ul>
<p class="caption"><span class="caption-text">Developers</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../developer.html">API Reference</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Pandas_Alive</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">Module code</a> &raquo;</li>
        
      <li>pandas_alive.plotting</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for pandas_alive.plotting</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot; Plotting implementations for accessor to Pandas.DataFrame &amp; multiple animated plots</span>

<span class="sd">Implementation of accessor to pass args and kwargs from accessor function to chart constructors.</span>

<span class="sd">Example:</span>
<span class="sd">    ``df.plot_animated()``</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">import</span> <span class="nn">datetime</span>
<span class="kn">import</span> <span class="nn">typing</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Sequence</span>

<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">from</span> <span class="nn">matplotlib.animation</span> <span class="kn">import</span> <span class="n">FuncAnimation</span>
<span class="kn">from</span> <span class="nn">matplotlib.colors</span> <span class="kn">import</span> <span class="n">Colormap</span>
<span class="kn">from</span> <span class="nn">pandas.core.base</span> <span class="kn">import</span> <span class="n">PandasObject</span>

<span class="kn">from</span> <span class="nn">.charts</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">BarChart</span><span class="p">,</span>
    <span class="n">BarChartRace</span><span class="p">,</span>
    <span class="n">BubbleChart</span><span class="p">,</span>
    <span class="n">LineChart</span><span class="p">,</span>
    <span class="n">PieChart</span><span class="p">,</span>
    <span class="n">ScatterChart</span><span class="p">,</span>
<span class="p">)</span>


<div class="viewcode-block" id="get_allowed_kinds"><a class="viewcode-back" href="../../generated/pandas_alive.plotting.get_allowed_kinds.html#pandas_alive.plotting.get_allowed_kinds">[docs]</a><span class="k">def</span> <span class="nf">get_allowed_kinds</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot; Get list of implemented charts</span>

<span class="sd">    Returns:</span>
<span class="sd">        typing.List[str]: List of implemented chart types</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">[</span><span class="s2">&quot;race&quot;</span><span class="p">,</span> <span class="s2">&quot;line&quot;</span><span class="p">,</span> <span class="s2">&quot;scatter&quot;</span><span class="p">,</span> <span class="s2">&quot;pie&quot;</span><span class="p">,</span> <span class="s2">&quot;bar&quot;</span><span class="p">,</span> <span class="s2">&quot;bubble&quot;</span><span class="p">]</span></div>


<div class="viewcode-block" id="verify_filename"><a class="viewcode-back" href="../../generated/pandas_alive.plotting.verify_filename.html#pandas_alive.plotting.verify_filename">[docs]</a><span class="k">def</span> <span class="nf">verify_filename</span><span class="p">(</span><span class="n">filename</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot; Check file name is accurate</span>

<span class="sd">    Args:</span>
<span class="sd">        filename (str): String for file name with extension</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: Provide filename with extensions</span>
<span class="sd">        ValueError: Specify a length &gt; 0</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: Verified file name</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Specify filename&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="p">(</span>
        <span class="nb">isinstance</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span>
        <span class="ow">and</span> <span class="s2">&quot;.&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">filename</span>
        <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">filename</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)[</span><span class="mi">1</span><span class="p">])</span> <span class="o">&lt;=</span> <span class="mi">0</span>
    <span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;`filename` must be provided &amp; have an extension&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">filename</span></div>


<div class="viewcode-block" id="plot"><a class="viewcode-back" href="../../generated/pandas_alive.plotting.plot.html#pandas_alive.plotting.plot">[docs]</a><span class="k">def</span> <span class="nf">plot</span><span class="p">(</span>
    <span class="c1"># Base constructor</span>
    <span class="n">input_df</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span>
    <span class="n">filename</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">kind</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;race&quot;</span><span class="p">,</span>
    <span class="n">interpolate_period</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">steps_per_period</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span>
    <span class="n">period_length</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">500</span><span class="p">,</span>
    <span class="n">period_fmt</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%d</span><span class="s2">/%m/%Y&quot;</span><span class="p">,</span>
    <span class="n">figsize</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mf">6.5</span><span class="p">,</span> <span class="mf">3.5</span><span class="p">),</span>
    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">fig</span><span class="p">:</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">cmap</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Colormap</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="s2">&quot;dark24&quot;</span><span class="p">,</span>
    <span class="n">tick_label_size</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="mi">7</span><span class="p">,</span>
    <span class="n">period_label</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span>
        <span class="nb">bool</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span>
    <span class="p">]</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">period_summary_func</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Callable</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">fixed_max</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">dpi</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">144</span><span class="p">,</span>
    <span class="n">writer</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">enable_progress_bar</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="c1"># Bar chart</span>
    <span class="n">orientation</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;h&quot;</span><span class="p">,</span>
    <span class="n">sort</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;desc&quot;</span><span class="p">,</span>
    <span class="n">label_bars</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">bar_label_size</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="mi">7</span><span class="p">,</span>
    <span class="n">n_visible</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">fixed_order</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="nb">list</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">perpendicular_bar_func</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Callable</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="c1"># Line Chart</span>
    <span class="n">line_width</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
    <span class="n">label_events</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">fill_under_line_color</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="c1"># Scatter Chart</span>
    <span class="n">size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
    <span class="c1"># Bubble Chart</span>
    <span class="n">x_data_label</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">y_data_label</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">size_data_label</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
    <span class="n">color_data_label</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;blue&quot;</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">ScatterChart</span><span class="p">,</span> <span class="n">BarChartRace</span><span class="p">,</span> <span class="n">LineChart</span><span class="p">,</span> <span class="n">PieChart</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create animated charts with matplotlib and pandas</span>

<span class="sd">    Data must be in &#39;wide&#39; format where each row represents a single time period and each</span>
<span class="sd">    column represents a distinct category. Optionally, the index can label the time period.</span>
<span class="sd">    Bar height and location change linearly from one time period to the next.</span>
<span class="sd">    This is resource intensive - Start with just a few rows of data to test.</span>

<span class="sd">    Args:</span>
<span class="sd">        filename (str, optional): If a string, save animation to that filename location. Defaults to None.</span>

<span class="sd">        kind (str, optional): Type of chart to use. Defaults to &quot;race&quot;.</span>
<span class="sd">            Supported kinds are: &quot;race&quot;, &quot;line&quot;, &quot;scatter&quot;,&quot;pie&quot;,&quot;bar&quot;,&quot;bubble&quot;</span>

<span class="sd">        interpolate_period (bool, optional): Whether to interpolate the period. Only valid for datetime or numeric indexes. Defaults to `True`.</span>
<span class="sd">            When set to `True`, for example, the two consecutive periods 2020-03-29 and 2020-03-30 would yield a new index of</span>
<span class="sd">                &gt;&gt;&gt; df.plot_animated(interpolate_period=True,steps_per_period=4)</span>
<span class="sd">                    2020-03-29 00:00:00</span>
<span class="sd">                    2020-03-29 06:00:00</span>
<span class="sd">                    2020-03-29 12:00:00</span>
<span class="sd">                    2020-03-29 18:00:00</span>
<span class="sd">                    2020-03-30 00:00:00</span>

<span class="sd">        steps_per_period (int, optional): The number of steps to go from one time period to the next. Animation will interpolate between time periods. Defaults to 10.</span>

<span class="sd">        period_length (int, optional): Number of milliseconds to animate each period (row). Defaults to 500.</span>

<span class="sd">        period_fmt (str, optional):  Either a string with date directives or a new-style (Python 3.6+) formatted string.</span>
<span class="sd">            For a string with a date directive, find the complete list here https://docs.python.org/3/library/datetime.html#strftime-and-strptime-format-codes</span>

<span class="sd">            String with date directives</span>
<span class="sd">            .. code-block::</span>
<span class="sd">                df.plot_animated(period_fmt=&#39;%B %d, %Y&#39;)</span>
<span class="sd">            Will change 2020/03/29 to March 29, 2020</span>

<span class="sd">            For new-style formatted string. Use curly braces and the variable `x`,</span>
<span class="sd">            which will be passed the current period&#39;s index value.</span>
<span class="sd">            .. code-block::</span>
<span class="sd">                &#39;Period {x:10.2f}&#39;</span>

<span class="sd">            Date directives will only be used for datetime indexes. Defaults to &quot;%d/%m/%Y&quot;.</span>

<span class="sd">        figsize (typing.Tuple[float, float], optional): matplotlib figure size in inches. Will be overridden if figure supplied to `fig`. Defaults to (6.5, 3.5).</span>

<span class="sd">        title (str, optional): Title of plot. Defaults to None.</span>

<span class="sd">        fig (plt.figure, optional): For greater control over the aesthetics, supply your own figure. Defaults to None.</span>

<span class="sd">        cmap (typing.Union[str, Colormap, typing.List[str]], optional): Provide string of colormap name, colormap instance, single color instance or list of colors as supported by https://matplotlib.org/2.0.2/api/colors_api.html. Defaults to &quot;dark24&quot;.</span>

<span class="sd">        tick_label_size (typing.Union[int, float], optional): Size in points of tick labels. Defaults to 7.</span>

<span class="sd">        period_label (typing.Union[bool, typing.Dict[str, typing.Union[int, float, str]]], optional): If `True` or dict, use the index as a large text label on the axes whose value changes.</span>
<span class="sd">            Use a dictionary to supply the exact position of the period along with any valid parameters of the matplotlib `text` method.</span>
<span class="sd">            At a minimum, you must supply both &#39;x&#39; and &#39;y&#39; in axes coordinates</span>
<span class="sd">            .. code-block::</span>
<span class="sd">                custom_period_location = {</span>
<span class="sd">                    &#39;x&#39;: .99,</span>
<span class="sd">                    &#39;y&#39;: .8,</span>
<span class="sd">                    &#39;ha&#39;: &#39;right&#39;,</span>
<span class="sd">                    &#39;va&#39;: &#39;center&#39;</span>
<span class="sd">                    }</span>

<span class="sd">                df.plot_animated(period_label=custom_period_location)</span>

<span class="sd">            If `False` - don&#39;t place label on axes. Defaults to True.</span>

<span class="sd">        period_summary_func (typing.Callable, optional):  Custom text added to the axes each period.</span>
<span class="sd">            Create a user-defined function that accepts two pandas Series of the current time period&#39;s values and ranks. It must return a dictionary containing at a minimum the keys &quot;x&quot;, &quot;y&quot;, and &quot;s&quot; which will be passed to the matplotlib `text` method. Defaults to None.</span>
<span class="sd">            .. code-block::</span>
<span class="sd">                def func(values):</span>
<span class="sd">                    total = values.sum()</span>
<span class="sd">                    s = f&#39;Total Generation: {total}&#39;</span>
<span class="sd">                    return {&#39;x&#39;: .85, &#39;y&#39;: .2, &#39;s&#39;: s, &#39;ha&#39;: &#39;right&#39;, &#39;size&#39;: 11}</span>

<span class="sd">                df.plot_animated(period_summary_func=func)</span>

<span class="sd">        dpi (float, optional): It is possible for some bars to be out of order momentarily during a transition since both height and location change linearly. Defaults to 144.</span>

<span class="sd">        writer (str, optional): Specify writer library, must be within list of available writers (`matplotlib.animation.writers.list()`) and `pillow` is not supported. Defaults to None.</span>

<span class="sd">        enable_progress_bar (bool,optional): Enable tqdm bar to show progress on generating animation, see more details at https://github.com/tqdm/tqdm. Defaults to False.</span>

<span class="sd">        sort (str, optional): &#39;asc&#39; or &#39;desc&#39;. Choose how to sort the bars. Use &#39;desc&#39; to put largest bars on top and &#39;asc&#39; to place largest bars on bottom. Defaults to &quot;desc&quot;.</span>

<span class="sd">        label_bars (bool, optional): Whether to label the bars with their value on their right. Defaults to True.</span>

<span class="sd">        bar_label_size (typing.Union[int, float], optional): Size in points or relative size str of numeric labels just outside of the bars. Defaults to 7.</span>

<span class="sd">        n_visible (int, optional): Choose the maximum number of bars to display on the graph. By default, use all bars. New bars entering the race will appear from the edge of the axes. Defaults to None.</span>

<span class="sd">        fixed_order (typing.Union[bool, list], optional): When `False`, bar order changes every time period to correspond</span>
<span class="sd">            with `sort`. When `True`, bars remained fixed according to their</span>
<span class="sd">            final value corresponding with `sort`. Otherwise, provide a list</span>
<span class="sd">            of the exact order of the categories for the entire duration. Defaults to False.</span>

<span class="sd">        fixed_max (bool, optional): Whether to fix the maximum value of the axis containing the values.</span>
<span class="sd">            When `False`, the axis for the values will have its maximum (xlim/ylim)</span>
<span class="sd">            just after the largest bar of the current time period.</span>
<span class="sd">            The axis maximum will change along with the data.</span>
<span class="sd">            When True, the maximum axis value will remain constant for the</span>
<span class="sd">            duration of the animation. For example, in a horizontal bar chart,</span>
<span class="sd">            if the largest bar has a value of 100 for the first time period and</span>
<span class="sd">            10,000 for the last time period. The xlim maximum will be 10,000</span>
<span class="sd">            for each frame. Defaults to False.</span>

<span class="sd">        perpendicular_bar_func (typing.Union[typing.Callable, str], optional): Creates a single bar perpendicular to the main bars that spans the length of the axis.</span>

<span class="sd">            Use either a string that the DataFrame `agg` method understands or a</span>
<span class="sd">            user-defined function.</span>

<span class="sd">            DataFrame strings - &#39;mean&#39;, &#39;median&#39;, &#39;max&#39;, &#39;min&#39;, etc..</span>

<span class="sd">            The function is passed two pandas Series of the current time period&#39;s</span>
<span class="sd">            data and ranks. It must return a single value.</span>
<span class="sd">            .. code-block::</span>
<span class="sd">                def func(values):</span>
<span class="sd">                    return values.quantile(.75).</span>

<span class="sd">            Defaults to None.</span>

<span class="sd">        line_width (int, optional): Line width provided on line charts. Defaults to 2.</span>

<span class="sd">        label_events (typing.Dict[str,datetime.datetime],optional): Provide list of events to label with a vertical bar on line charts. Defaults to None.</span>

<span class="sd">            To be used with strptime or any datetime object</span>

<span class="sd">            Sample use:</span>
<span class="sd">            .. code-block::</span>
<span class="sd">                df.plot_animated(</span>
<span class="sd">                        kind=&#39;line&#39;,</span>
<span class="sd">                        filename=&#39;test.mp4&#39;,</span>
<span class="sd">                        label_events={</span>
<span class="sd">                            &#39;Ruby Princess Disembark&#39;:datetime.strptime(&quot;19/03/2020&quot;, &quot;%d/%m/%Y&quot;),</span>
<span class="sd">                            &#39;Lockdown&#39;:datetime.strptime(&quot;31/03/2020&quot;, &quot;%d/%m/%Y&quot;)</span>
<span class="sd">                        },</span>
<span class="sd">                    )</span>

<span class="sd">        fill_under_line_color (str,optional): Color to show under line to create an area chart equivalent</span>

<span class="sd">            String passed must be in list of named colors by matplotlib https://matplotlib.org/3.1.1/gallery/color/named_colors.html#sphx-glr-gallery-color-named-colors-py</span>

<span class="sd">        size (int, optional): Size of scatter points on scatter charts. Defaults to 2.</span>

<span class="sd">        x_data_label (str,optional): For use with Scatter plots, label passed must be in level 0 column in multiindex</span>

<span class="sd">            Label passed all values will be used for the x-axis</span>

<span class="sd">        y_data_label (str,optional): For use with Scatter plots, label passed must be in level 0 column in multiindex</span>

<span class="sd">            Label passed all values will be used for the y-axis</span>

<span class="sd">        size_data_label (typing.Union[int,str],optional): For use with Scatter plots, label passed must be in level 0 column in multiindex. Defaults to 2.</span>

<span class="sd">            Label passed all values will be used for the size of each point on the plot.</span>
<span class="sd">            Otherwise a int can be passed for all points to be that size.</span>

<span class="sd">        color_data_label (str,optional): For use with Scatter plots, label passed must be in level 0 column in multiindex. Defaults. to &quot;blue&quot;.</span>

<span class="sd">            Label passed all values will be used to create a colourmap for points.</span>
<span class="sd">            Otherwise a string can be passed of a named color by matplotlib for all points to be that color.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If chart type is not supported, raise error</span>

<span class="sd">    Returns:</span>
<span class="sd">        typing.Union[ScatterChart, BarChart, LineChart]: Return instance of chart type. Can be used with `pandas_alive.animate_multiple_plots` or `.save()`.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">input_df</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">):</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>

    <span class="n">allowed_kinds</span> <span class="o">=</span> <span class="n">get_allowed_kinds</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">kind</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">allowed_kinds</span><span class="p">:</span>
        <span class="n">allowed_kinds</span> <span class="o">=</span> <span class="s2">&quot;&#39;, &#39;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">allowed_kinds</span><span class="p">)</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Allowed plot kinds are &#39;</span><span class="si">%s</span><span class="s2">&#39;.&quot;</span> <span class="o">%</span> <span class="n">allowed_kinds</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">kind</span> <span class="o">==</span> <span class="s2">&quot;race&quot;</span><span class="p">:</span>
        <span class="n">bcr</span> <span class="o">=</span> <span class="n">BarChartRace</span><span class="p">(</span>
            <span class="n">df</span><span class="p">,</span>
            <span class="n">interpolate_period</span><span class="o">=</span><span class="n">interpolate_period</span><span class="p">,</span>
            <span class="n">steps_per_period</span><span class="o">=</span><span class="n">steps_per_period</span><span class="p">,</span>
            <span class="n">period_length</span><span class="o">=</span><span class="n">period_length</span><span class="p">,</span>
            <span class="n">period_fmt</span><span class="o">=</span><span class="n">period_fmt</span><span class="p">,</span>
            <span class="n">figsize</span><span class="o">=</span><span class="n">figsize</span><span class="p">,</span>
            <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">,</span>
            <span class="n">fig</span><span class="o">=</span><span class="n">fig</span><span class="p">,</span>
            <span class="n">cmap</span><span class="o">=</span><span class="n">cmap</span><span class="p">,</span>
            <span class="n">tick_label_size</span><span class="o">=</span><span class="n">tick_label_size</span><span class="p">,</span>
            <span class="n">period_label</span><span class="o">=</span><span class="n">period_label</span><span class="p">,</span>
            <span class="n">period_summary_func</span><span class="o">=</span><span class="n">period_summary_func</span><span class="p">,</span>
            <span class="n">fixed_max</span><span class="o">=</span><span class="n">fixed_max</span><span class="p">,</span>
            <span class="n">dpi</span><span class="o">=</span><span class="n">dpi</span><span class="p">,</span>
            <span class="n">writer</span><span class="o">=</span><span class="n">writer</span><span class="p">,</span>
            <span class="n">enable_progress_bar</span><span class="o">=</span><span class="n">enable_progress_bar</span><span class="p">,</span>
            <span class="c1"># Bar chart</span>
            <span class="n">orientation</span><span class="o">=</span><span class="n">orientation</span><span class="p">,</span>
            <span class="n">sort</span><span class="o">=</span><span class="n">sort</span><span class="p">,</span>
            <span class="n">label_bars</span><span class="o">=</span><span class="n">label_bars</span><span class="p">,</span>
            <span class="n">bar_label_size</span><span class="o">=</span><span class="n">bar_label_size</span><span class="p">,</span>
            <span class="n">n_visible</span><span class="o">=</span><span class="n">n_visible</span><span class="p">,</span>
            <span class="n">fixed_order</span><span class="o">=</span><span class="n">fixed_order</span><span class="p">,</span>
            <span class="n">perpendicular_bar_func</span><span class="o">=</span><span class="n">perpendicular_bar_func</span><span class="p">,</span>
            <span class="n">kwargs</span><span class="o">=</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">filename</span><span class="p">:</span>
            <span class="n">bcr</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">verify_filename</span><span class="p">(</span><span class="n">filename</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">bcr</span>

    <span class="k">elif</span> <span class="n">kind</span> <span class="o">==</span> <span class="s2">&quot;line&quot;</span><span class="p">:</span>
        <span class="n">line_race</span> <span class="o">=</span> <span class="n">LineChart</span><span class="p">(</span>
            <span class="n">df</span><span class="p">,</span>
            <span class="n">interpolate_period</span><span class="o">=</span><span class="n">interpolate_period</span><span class="p">,</span>
            <span class="n">steps_per_period</span><span class="o">=</span><span class="n">steps_per_period</span><span class="p">,</span>
            <span class="n">period_length</span><span class="o">=</span><span class="n">period_length</span><span class="p">,</span>
            <span class="n">period_fmt</span><span class="o">=</span><span class="n">period_fmt</span><span class="p">,</span>
            <span class="n">figsize</span><span class="o">=</span><span class="n">figsize</span><span class="p">,</span>
            <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">,</span>
            <span class="n">fig</span><span class="o">=</span><span class="n">fig</span><span class="p">,</span>
            <span class="n">cmap</span><span class="o">=</span><span class="n">cmap</span><span class="p">,</span>
            <span class="n">tick_label_size</span><span class="o">=</span><span class="n">tick_label_size</span><span class="p">,</span>
            <span class="n">period_label</span><span class="o">=</span><span class="n">period_label</span><span class="p">,</span>
            <span class="n">period_summary_func</span><span class="o">=</span><span class="n">period_summary_func</span><span class="p">,</span>
            <span class="n">fixed_max</span><span class="o">=</span><span class="n">fixed_max</span><span class="p">,</span>
            <span class="n">dpi</span><span class="o">=</span><span class="n">dpi</span><span class="p">,</span>
            <span class="n">writer</span><span class="o">=</span><span class="n">writer</span><span class="p">,</span>
            <span class="n">enable_progress_bar</span><span class="o">=</span><span class="n">enable_progress_bar</span><span class="p">,</span>
            <span class="n">line_width</span><span class="o">=</span><span class="n">line_width</span><span class="p">,</span>
            <span class="n">label_events</span><span class="o">=</span><span class="n">label_events</span><span class="p">,</span>
            <span class="n">fill_under_line_color</span><span class="o">=</span><span class="n">fill_under_line_color</span><span class="p">,</span>
            <span class="n">kwargs</span><span class="o">=</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">filename</span><span class="p">:</span>
            <span class="n">line_race</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">verify_filename</span><span class="p">(</span><span class="n">filename</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">line_race</span>
    <span class="k">elif</span> <span class="n">kind</span> <span class="o">==</span> <span class="s2">&quot;scatter&quot;</span><span class="p">:</span>
        <span class="n">animated_scatter</span> <span class="o">=</span> <span class="n">ScatterChart</span><span class="p">(</span>
            <span class="n">df</span><span class="p">,</span>
            <span class="n">interpolate_period</span><span class="o">=</span><span class="n">interpolate_period</span><span class="p">,</span>
            <span class="n">steps_per_period</span><span class="o">=</span><span class="n">steps_per_period</span><span class="p">,</span>
            <span class="n">period_length</span><span class="o">=</span><span class="n">period_length</span><span class="p">,</span>
            <span class="n">period_fmt</span><span class="o">=</span><span class="n">period_fmt</span><span class="p">,</span>
            <span class="n">figsize</span><span class="o">=</span><span class="n">figsize</span><span class="p">,</span>
            <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">,</span>
            <span class="n">fig</span><span class="o">=</span><span class="n">fig</span><span class="p">,</span>
            <span class="n">cmap</span><span class="o">=</span><span class="n">cmap</span><span class="p">,</span>
            <span class="n">tick_label_size</span><span class="o">=</span><span class="n">tick_label_size</span><span class="p">,</span>
            <span class="n">period_label</span><span class="o">=</span><span class="n">period_label</span><span class="p">,</span>
            <span class="n">period_summary_func</span><span class="o">=</span><span class="n">period_summary_func</span><span class="p">,</span>
            <span class="n">fixed_max</span><span class="o">=</span><span class="n">fixed_max</span><span class="p">,</span>
            <span class="n">dpi</span><span class="o">=</span><span class="n">dpi</span><span class="p">,</span>
            <span class="n">writer</span><span class="o">=</span><span class="n">writer</span><span class="p">,</span>
            <span class="n">enable_progress_bar</span><span class="o">=</span><span class="n">enable_progress_bar</span><span class="p">,</span>
            <span class="n">size</span><span class="o">=</span><span class="n">size</span><span class="p">,</span>
            <span class="n">kwargs</span><span class="o">=</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">filename</span><span class="p">:</span>
            <span class="n">animated_scatter</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">verify_filename</span><span class="p">(</span><span class="n">filename</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">animated_scatter</span>
    <span class="k">elif</span> <span class="n">kind</span> <span class="o">==</span> <span class="s2">&quot;pie&quot;</span><span class="p">:</span>
        <span class="n">animated_pie</span> <span class="o">=</span> <span class="n">PieChart</span><span class="p">(</span>
            <span class="n">df</span><span class="p">,</span>
            <span class="n">interpolate_period</span><span class="o">=</span><span class="n">interpolate_period</span><span class="p">,</span>
            <span class="n">steps_per_period</span><span class="o">=</span><span class="n">steps_per_period</span><span class="p">,</span>
            <span class="n">period_length</span><span class="o">=</span><span class="n">period_length</span><span class="p">,</span>
            <span class="n">period_fmt</span><span class="o">=</span><span class="n">period_fmt</span><span class="p">,</span>
            <span class="n">figsize</span><span class="o">=</span><span class="n">figsize</span><span class="p">,</span>
            <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">,</span>
            <span class="n">fig</span><span class="o">=</span><span class="n">fig</span><span class="p">,</span>
            <span class="n">cmap</span><span class="o">=</span><span class="n">cmap</span><span class="p">,</span>
            <span class="n">tick_label_size</span><span class="o">=</span><span class="n">tick_label_size</span><span class="p">,</span>
            <span class="n">period_label</span><span class="o">=</span><span class="n">period_label</span><span class="p">,</span>
            <span class="n">period_summary_func</span><span class="o">=</span><span class="n">period_summary_func</span><span class="p">,</span>
            <span class="n">fixed_max</span><span class="o">=</span><span class="n">fixed_max</span><span class="p">,</span>
            <span class="n">dpi</span><span class="o">=</span><span class="n">dpi</span><span class="p">,</span>
            <span class="n">writer</span><span class="o">=</span><span class="n">writer</span><span class="p">,</span>
            <span class="n">enable_progress_bar</span><span class="o">=</span><span class="n">enable_progress_bar</span><span class="p">,</span>
            <span class="n">kwargs</span><span class="o">=</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">filename</span><span class="p">:</span>
            <span class="n">animated_pie</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">verify_filename</span><span class="p">(</span><span class="n">filename</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">animated_pie</span>
    <span class="k">elif</span> <span class="n">kind</span> <span class="o">==</span> <span class="s2">&quot;bar&quot;</span><span class="p">:</span>
        <span class="n">animated_bar</span> <span class="o">=</span> <span class="n">BarChart</span><span class="p">(</span>
            <span class="n">df</span><span class="p">,</span>
            <span class="n">interpolate_period</span><span class="o">=</span><span class="n">interpolate_period</span><span class="p">,</span>
            <span class="n">steps_per_period</span><span class="o">=</span><span class="n">steps_per_period</span><span class="p">,</span>
            <span class="n">period_length</span><span class="o">=</span><span class="n">period_length</span><span class="p">,</span>
            <span class="n">period_fmt</span><span class="o">=</span><span class="n">period_fmt</span><span class="p">,</span>
            <span class="n">figsize</span><span class="o">=</span><span class="n">figsize</span><span class="p">,</span>
            <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">,</span>
            <span class="n">fig</span><span class="o">=</span><span class="n">fig</span><span class="p">,</span>
            <span class="n">cmap</span><span class="o">=</span><span class="n">cmap</span><span class="p">,</span>
            <span class="n">tick_label_size</span><span class="o">=</span><span class="n">tick_label_size</span><span class="p">,</span>
            <span class="n">period_label</span><span class="o">=</span><span class="n">period_label</span><span class="p">,</span>
            <span class="n">period_summary_func</span><span class="o">=</span><span class="n">period_summary_func</span><span class="p">,</span>
            <span class="n">fixed_max</span><span class="o">=</span><span class="n">fixed_max</span><span class="p">,</span>
            <span class="n">dpi</span><span class="o">=</span><span class="n">dpi</span><span class="p">,</span>
            <span class="n">writer</span><span class="o">=</span><span class="n">writer</span><span class="p">,</span>
            <span class="n">enable_progress_bar</span><span class="o">=</span><span class="n">enable_progress_bar</span><span class="p">,</span>
            <span class="n">kwargs</span><span class="o">=</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">filename</span><span class="p">:</span>
            <span class="n">animated_bar</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">verify_filename</span><span class="p">(</span><span class="n">filename</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">animated_bar</span>
    <span class="k">elif</span> <span class="n">kind</span> <span class="o">==</span> <span class="s2">&quot;bubble&quot;</span><span class="p">:</span>
        <span class="n">animated_bubble</span> <span class="o">=</span> <span class="n">BubbleChart</span><span class="p">(</span>
            <span class="n">df</span><span class="p">,</span>
            <span class="n">interpolate_period</span><span class="o">=</span><span class="n">interpolate_period</span><span class="p">,</span>
            <span class="n">steps_per_period</span><span class="o">=</span><span class="n">steps_per_period</span><span class="p">,</span>
            <span class="n">period_length</span><span class="o">=</span><span class="n">period_length</span><span class="p">,</span>
            <span class="n">period_fmt</span><span class="o">=</span><span class="n">period_fmt</span><span class="p">,</span>
            <span class="n">figsize</span><span class="o">=</span><span class="n">figsize</span><span class="p">,</span>
            <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">,</span>
            <span class="n">fig</span><span class="o">=</span><span class="n">fig</span><span class="p">,</span>
            <span class="n">cmap</span><span class="o">=</span><span class="n">cmap</span><span class="p">,</span>
            <span class="n">tick_label_size</span><span class="o">=</span><span class="n">tick_label_size</span><span class="p">,</span>
            <span class="n">period_label</span><span class="o">=</span><span class="n">period_label</span><span class="p">,</span>
            <span class="n">period_summary_func</span><span class="o">=</span><span class="n">period_summary_func</span><span class="p">,</span>
            <span class="n">fixed_max</span><span class="o">=</span><span class="n">fixed_max</span><span class="p">,</span>
            <span class="n">dpi</span><span class="o">=</span><span class="n">dpi</span><span class="p">,</span>
            <span class="n">writer</span><span class="o">=</span><span class="n">writer</span><span class="p">,</span>
            <span class="n">enable_progress_bar</span><span class="o">=</span><span class="n">enable_progress_bar</span><span class="p">,</span>
            <span class="n">x_data_label</span><span class="o">=</span><span class="n">x_data_label</span><span class="p">,</span>
            <span class="n">y_data_label</span><span class="o">=</span><span class="n">y_data_label</span><span class="p">,</span>
            <span class="n">size_data_label</span><span class="o">=</span><span class="n">size_data_label</span><span class="p">,</span>
            <span class="n">color_data_label</span><span class="o">=</span><span class="n">color_data_label</span><span class="p">,</span>
            <span class="n">kwargs</span><span class="o">=</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">filename</span><span class="p">:</span>
            <span class="n">animated_bubble</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">verify_filename</span><span class="p">(</span><span class="n">filename</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">animated_bubble</span></div>


<div class="viewcode-block" id="animate_multiple_plots"><a class="viewcode-back" href="../../generated/pandas_alive.plotting.animate_multiple_plots.html#pandas_alive.plotting.animate_multiple_plots">[docs]</a><span class="k">def</span> <span class="nf">animate_multiple_plots</span><span class="p">(</span>
    <span class="n">filename</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">plots</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">BarChartRace</span><span class="p">,</span> <span class="n">LineChart</span><span class="p">,</span> <span class="n">PieChart</span><span class="p">,</span> <span class="n">ScatterChart</span><span class="p">]],</span>
    <span class="n">custom_fig</span><span class="p">:</span> <span class="n">plt</span><span class="o">.</span><span class="n">Figure</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">title_fontsize</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="mi">16</span><span class="p">,</span>
    <span class="n">dpi</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">144</span><span class="p">,</span>
    <span class="n">adjust_subplot_left</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.15</span><span class="p">,</span>
    <span class="n">adjust_subplot_right</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.9</span><span class="p">,</span>
    <span class="n">adjust_subplot_bottom</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.1</span><span class="p">,</span>
    <span class="n">adjust_subplot_top</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.9</span><span class="p">,</span>
    <span class="n">adjust_subplot_wspace</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.2</span><span class="p">,</span>
    <span class="n">adjust_subplot_hspace</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.25</span><span class="p">,</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Plot multiple animated subplots with plt.subplots()</span>

<span class="sd">    Args:</span>
<span class="sd">        filename (str): Output file name with extension to rite to</span>
<span class="sd">        plots (typing.List[typing.Union[BarChart, LineChart]]): List of chart instances</span>
<span class="sd">        title (str, optional): Overall title for plots (suptitle). Defaults to None.</span>
<span class="sd">        title_fontsize (typing.Union[int, float], optional): Font size for suptitle. Defaults to 16.</span>
<span class="sd">        dpi (int, optional): Custom DPI to increase resolution. Defaults to 144.</span>
<span class="sd">        adjust_subplot_left (float, optional): the left side of the subplots of the figure. Defaults to 0.125.</span>
<span class="sd">        adjust_subplot_right (float, optional): the right side of the subplots of the figure. Defaults to 0.9.</span>
<span class="sd">        adjust_subplot_bottom (float, optional): the bottom of the subplots of the figure. Defaults to 0.1.</span>
<span class="sd">        adjust_subplot_top (float, optional): the top of the subplots of the figure. Defaults to 0.9.</span>
<span class="sd">        adjust_subplot_wspace (float, optional): the amount of width reserved for space between subplots, expressed as a fraction of the average axis width. Defaults to 0.2.</span>
<span class="sd">        adjust_subplot_hspace (float, optional): the amount of height reserved for space between subplots, expressed as a fraction of the average axis height. Defaults to 0.2.</span>

<span class="sd">    Raises:</span>
<span class="sd">        UserWarning: If Error found when plotting, prompt user to ensure indexs of plots are same length</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">update_all_graphs</span><span class="p">(</span><span class="n">frame</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Function for updating all plots provided as a list via their respective `anim_func` method</span>

<span class="sd">        Args:</span>
<span class="sd">            frame (int): Frame to animate</span>

<span class="sd">        Raises:</span>
<span class="sd">            UserWarning: DataFrames apart of plots must have same length of index</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">plot</span> <span class="ow">in</span> <span class="n">plots</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">plot</span><span class="o">.</span><span class="n">anim_func</span><span class="p">(</span><span class="n">frame</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">UserWarning</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Ensure all plots share index length </span><span class="si">{</span><span class="p">[</span><span class="n">plot</span><span class="o">.</span><span class="n">get_frames</span><span class="p">()</span> <span class="k">for</span> <span class="n">plot</span> <span class="ow">in</span> <span class="n">plots</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>

    <span class="c1"># Current just number of columns for number of plots</span>
    <span class="c1"># TODO add option for number of rows/columns</span>
    <span class="c1"># TODO Use gridspec?</span>

    <span class="c1"># Otherwise titles overlap and adjust_subplot does nothing</span>
    <span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">rcParams</span>

    <span class="n">rcParams</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&quot;figure.autolayout&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">})</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">custom_fig</span><span class="p">:</span>
        <span class="n">fig</span><span class="p">,</span> <span class="n">axes</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">plots</span><span class="p">))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">fig</span> <span class="o">=</span> <span class="n">custom_fig</span>
        <span class="n">axes</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">axes</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">axes</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">plots</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="s2">&quot;Ensure number of axes in custom figure and number of plots match&quot;</span>
        <span class="p">)</span>
    <span class="c1"># fig, axes = plt.subplots(2,2)</span>

    <span class="k">if</span> <span class="n">title</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="n">title</span><span class="p">)</span>
    <span class="c1"># fig.set_tight_layout(True)</span>
    <span class="c1"># Defaults from https://matplotlib.org/3.1.1/api/_as_gen/matplotlib.pyplot.subplots_adjust.html</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span>
        <span class="n">left</span><span class="o">=</span><span class="n">adjust_subplot_left</span><span class="p">,</span>
        <span class="n">right</span><span class="o">=</span><span class="n">adjust_subplot_right</span><span class="p">,</span>
        <span class="n">bottom</span><span class="o">=</span><span class="n">adjust_subplot_bottom</span><span class="p">,</span>
        <span class="n">top</span><span class="o">=</span><span class="n">adjust_subplot_top</span><span class="p">,</span>
        <span class="n">wspace</span><span class="o">=</span><span class="n">adjust_subplot_wspace</span><span class="p">,</span>
        <span class="n">hspace</span><span class="o">=</span><span class="n">adjust_subplot_hspace</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="c1"># fig = plt.figure()</span>
    <span class="c1"># spec = fig.add_gridspec()</span>
    <span class="c1"># fig.add_subplot(spec[0, 1])</span>
    <span class="c1"># Used for overlapping titles, supplot not considered so move down by 10%</span>
    <span class="c1"># https://stackoverflow.com/questions/8248467/matplotlib-tight-layout-doesnt-take-into-account-figure-suptitle</span>
    <span class="c1"># fig.tight_layout(rect=[0, 0, 1, 0.9])</span>
    <span class="c1"># fig.constrained_layout()</span>
    <span class="c1"># plt.rcParams[&quot;figure.constrained_layout.use&quot;] = True</span>
    <span class="c1"># plt.subplots_adjust(top=0.85)</span>
    <span class="c1"># plt.subplots_adjust()</span>
    <span class="c1"># plt.rcParams.update({&#39;figure.autolayout&#39;: True})</span>

    <span class="k">for</span> <span class="n">num</span><span class="p">,</span> <span class="n">plot</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">plots</span><span class="p">):</span>
        <span class="n">axes</span><span class="p">[</span><span class="n">num</span><span class="p">]</span> <span class="o">=</span> <span class="n">plot</span><span class="o">.</span><span class="n">apply_style</span><span class="p">(</span><span class="n">axes</span><span class="p">[</span><span class="n">num</span><span class="p">])</span>
        <span class="c1"># plot.set_x_y_limits(plot.df,1,axes[num])</span>
        <span class="k">if</span> <span class="n">plot</span><span class="o">.</span><span class="n">fixed_max</span><span class="p">:</span>
            <span class="c1"># Hodgepodge way of fixing this, should refactor to contain all figures and axes</span>
            <span class="c1"># TODO plot.axes_format(self,ax) and pass current ax or desired ax</span>
            <span class="k">if</span> <span class="n">plot</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;BarChartRace&quot;</span> <span class="ow">and</span> <span class="n">plot</span><span class="o">.</span><span class="n">orientation</span> <span class="o">==</span> <span class="s2">&quot;h&quot;</span><span class="p">:</span>
                <span class="n">axes</span><span class="p">[</span><span class="n">num</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">axes</span><span class="p">[</span><span class="n">num</span><span class="p">]</span><span class="o">.</span><span class="n">get_xlim</span><span class="p">()[</span><span class="mi">0</span><span class="p">],</span> <span class="n">plot</span><span class="o">.</span><span class="n">df</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">max</span><span class="p">()</span> <span class="o">*</span> <span class="mf">1.1</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">plot</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;BarChartRace&quot;</span> <span class="ow">and</span> <span class="n">plot</span><span class="o">.</span><span class="n">orientation</span> <span class="o">==</span> <span class="s2">&quot;v&quot;</span><span class="p">:</span>
                <span class="n">axes</span><span class="p">[</span><span class="n">num</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">axes</span><span class="p">[</span><span class="n">num</span><span class="p">]</span><span class="o">.</span><span class="n">get_ylim</span><span class="p">()[</span><span class="mi">0</span><span class="p">],</span> <span class="n">plot</span><span class="o">.</span><span class="n">df</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">max</span><span class="p">()</span> <span class="o">*</span> <span class="mf">1.1</span><span class="p">)</span>

        <span class="n">axes</span><span class="p">[</span><span class="n">num</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="n">plot</span><span class="o">.</span><span class="n">title</span><span class="p">)</span>
        <span class="n">plot</span><span class="o">.</span><span class="n">ax</span> <span class="o">=</span> <span class="n">axes</span><span class="p">[</span><span class="n">num</span><span class="p">]</span>

        <span class="n">plot</span><span class="o">.</span><span class="n">init_func</span><span class="p">()</span>

    <span class="c1"># fig.tight_layout()</span>

    <span class="n">fps</span> <span class="o">=</span> <span class="mi">1000</span> <span class="o">/</span> <span class="n">plots</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">period_length</span> <span class="o">*</span> <span class="n">plots</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">steps_per_period</span>
    <span class="n">interval</span> <span class="o">=</span> <span class="n">plots</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">period_length</span> <span class="o">/</span> <span class="n">plots</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">steps_per_period</span>
    <span class="n">anim</span> <span class="o">=</span> <span class="n">FuncAnimation</span><span class="p">(</span>
        <span class="n">fig</span><span class="p">,</span>
        <span class="n">update_all_graphs</span><span class="p">,</span>
        <span class="nb">min</span><span class="p">([</span><span class="nb">max</span><span class="p">(</span><span class="n">plot</span><span class="o">.</span><span class="n">get_frames</span><span class="p">())</span> <span class="k">for</span> <span class="n">plot</span> <span class="ow">in</span> <span class="n">plots</span><span class="p">]),</span>
        <span class="n">interval</span><span class="o">=</span><span class="n">interval</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">extension</span> <span class="o">=</span> <span class="n">filename</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
    <span class="c1"># anim.save(filename, fps=fps, dpi=dpi, writer=plots[0].writer)</span>
    <span class="k">if</span> <span class="n">extension</span> <span class="o">==</span> <span class="s2">&quot;gif&quot;</span><span class="p">:</span>
        <span class="kn">import</span> <span class="nn">io</span>
        <span class="kn">import</span> <span class="nn">matplotlib</span>

        <span class="n">matplotlib</span><span class="o">.</span><span class="n">use</span><span class="p">(</span><span class="s2">&quot;Agg&quot;</span><span class="p">)</span>
        <span class="kn">from</span> <span class="nn">PIL</span> <span class="kn">import</span> <span class="n">Image</span>

        <span class="n">frames</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">plots</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_frames</span><span class="p">():</span>
            <span class="n">frame</span> <span class="o">=</span> <span class="n">update_all_graphs</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
            <span class="n">buffer</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">()</span>
            <span class="n">fig</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">buffer</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;png&quot;</span><span class="p">)</span>
            <span class="n">buffer</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="n">image</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">buffer</span><span class="p">)</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
            <span class="n">frames</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>
        <span class="n">frames</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">save</span><span class="p">(</span>
            <span class="n">filename</span><span class="p">,</span>
            <span class="n">save_all</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">append_images</span><span class="o">=</span><span class="n">frames</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span>
            <span class="n">optimize</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">duration</span><span class="o">=</span><span class="n">plots</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">period_length</span> <span class="o">/</span> <span class="n">plots</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">steps_per_period</span><span class="p">,</span>
            <span class="n">loop</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="c1"># anim.save(filename, fps=fps, dpi=dpi, writer=&quot;imagemagick&quot;)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">anim</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">fps</span><span class="o">=</span><span class="n">fps</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="n">dpi</span><span class="p">)</span></div>


<span class="c1">##############################################################################</span>
<span class="c1">########### Class to add Animated plotting methods to Pandas DataFrame</span>
<span class="c1">##############################################################################</span>
<span class="c1"># Inspiration: https://github.com/PatrikHlobil/Pandas-Bokeh/blob/cb241ea570a0a2ea3d0c7055fbe79bbdd06cc712/pandas_bokeh/plot.py#L1759</span>


<div class="viewcode-block" id="BasePlotMethods"><a class="viewcode-back" href="../../generated/pandas_alive.plotting.BasePlotMethods.html#pandas_alive.plotting.BasePlotMethods">[docs]</a><span class="k">class</span> <span class="nc">BasePlotMethods</span><span class="p">(</span><span class="n">PandasObject</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; For extending accessor to pandas DataFrame</span>

<span class="sd">    Args:</span>
<span class="sd">        PandasObject (PandasObject): Base Pandas Object</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="BasePlotMethods.__init__"><a class="viewcode-back" href="../../generated/pandas_alive.plotting.BasePlotMethods.__init__.html#pandas_alive.plotting.BasePlotMethods.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">]):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialise BasePlotMethods with parent data as either Series or DataFrame</span>

<span class="sd">        Args:</span>
<span class="sd">            data (typing.Union[pd.Series,pd.DataFrame]): Will take _parent attribute from DataFrame/Series</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_parent</span> <span class="o">=</span> <span class="n">data</span>  <span class="c1"># can be Series or DataFrame</span></div>

    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        If accessor hasn&#39;t been initialised raise error</span>

<span class="sd">        Raises:</span>
<span class="sd">            NotImplementedError: Error if accessor function has not been overridden</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span></div>


<div class="viewcode-block" id="AnimatedAccessor"><a class="viewcode-back" href="../../generated/pandas_alive.plotting.AnimatedAccessor.html#pandas_alive.plotting.AnimatedAccessor">[docs]</a><span class="k">class</span> <span class="nc">AnimatedAccessor</span><span class="p">(</span><span class="n">BasePlotMethods</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; For including accessor on df, to enable `df.plot_animated()`</span>

<span class="sd">    Args:</span>
<span class="sd">        BasePlotMethods ([type]): BasePlotMethods within pandas</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Must be overriden to enable funcctionality</span>

<span class="sd">        Calls :func: pandas_alive.plotting.plot and returns instance of constructed chart</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">plot</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">df</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">df</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Contains _parent DataFrame</span>

<span class="sd">        Returns:</span>
<span class="sd">            typing.Union[pd.Series,pd.DataFrame]: Parent DataFrame/Series</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parent</span>

<div class="viewcode-block" id="AnimatedAccessor.barh"><a class="viewcode-back" href="../../generated/pandas_alive.plotting.AnimatedAccessor.barh.html#pandas_alive.plotting.AnimatedAccessor.barh">[docs]</a>    <span class="k">def</span> <span class="nf">barh</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwds</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Make an animated horizontal bar plot.</span>

<span class="sd">        Args:</span>
<span class="sd">            x (str, optional): label or position. Defaults to DataFrame.index. Column to be used on categories.</span>
<span class="sd">            y (str, optional): label or position. Defaults to All numeric columns in DataFrame. Column to be plotted from the DataFrame</span>

<span class="sd">        Returns:</span>
<span class="sd">            BarChart: BarChart instance for use with multiple plots or .save()</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s2">&quot;barh&quot;</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="o">**</span><span class="n">kwds</span><span class="p">)</span></div></div>
</pre></div>

           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Jack McKew

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>